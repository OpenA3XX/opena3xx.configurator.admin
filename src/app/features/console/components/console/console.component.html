<opena3xx-page-layout
  title="Console"
  subtitle="Real-time system monitoring and event management"
  icon="terminal"
  [actions]="pageActions"
  (actionClick)="onPageAction($event)">

  <opena3xx-loading-wrapper
    [loading]="loading()"
    [error]="error()"
    [isEmpty]="isEmpty()"
    (retry)="onRetry()">

    <div class="console-container">
      <!-- Connection Status -->
      <div class="connection-status" [class.connected]="isConnected()">
        <mat-icon>{{ isConnected() ? 'wifi' : 'wifi_off' }}</mat-icon>
        <span>{{ isConnected() ? 'Connected' : 'Disconnected' }}</span>
      </div>

      <!-- Statistics Cards -->
      <div class="stats-grid">
        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-value">{{ getTotalEvents() }}</div>
            <div class="stat-label">Total Events</div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-value">{{ getEventsPerMinute() }}</div>
            <div class="stat-label">Events/Min</div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-value">{{ getConnectedBoards() }}</div>
            <div class="stat-label">Connected Boards</div>
          </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
          <mat-card-content>
            <div class="stat-value">{{ getActiveSelectors() }}</div>
            <div class="stat-label">Active Selectors</div>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Console Messages -->
      <div class="console-messages">
        <div class="messages-header">
          <h3>Console Messages</h3>
          <div class="message-actions">
            <button mat-icon-button (click)="onClearEvents()" matTooltip="Clear Messages">
              <mat-icon>clear_all</mat-icon>
            </button>
            <button mat-icon-button (click)="onExportEvents()" matTooltip="Export Messages">
              <mat-icon>download</mat-icon>
            </button>
          </div>
        </div>

        <div class="messages-container">
          <div *ngFor="let message of messages()" class="message-item" [class]="'level-' + message.level">
            <div class="message-header">
              <span class="message-timestamp">{{ message.timestamp | date:'HH:mm:ss' }}</span>
              <span class="message-level">{{ message.level }}</span>
              <span class="message-source">{{ message.source }}</span>
              <button mat-icon-button (click)="onCopyEvent(message)" matTooltip="Copy Message">
                <mat-icon>content_copy</mat-icon>
              </button>
            </div>
            <div class="message-content">{{ message.message }}</div>
          </div>
        </div>
      </div>

      <!-- Charts Section (when enabled) -->
      <div *ngIf="showCharts()" class="charts-section">
        <h3>Performance Charts</h3>
        <div class="charts-grid">
          <!-- Chart placeholders -->
          <mat-card class="chart-card">
            <mat-card-content>
              <div class="chart-placeholder">Events per Minute Chart</div>
            </mat-card-content>
          </mat-card>

          <mat-card class="chart-card">
            <mat-card-content>
              <div class="chart-placeholder">Board Activity Chart</div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

  </opena3xx-loading-wrapper>

</opena3xx-page-layout>
